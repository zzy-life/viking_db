



# 火山知识库插件使用说明

**Author:** zzy
**Version:** 0.0.1
**Type:** tool



## 简介

火山知识库插件（Viking Knowledge Base Plugin）是一个连接火山引擎知识库服务的工具，允许用户通过简单的接口进行知识检索和问答生成。该插件提供两个主要功能：

1. **知识库搜索**：检索知识库中的相关文本片段，不生成回答
2. **搜索和生成**：检索知识库并使用大语言模型生成回答

## 设置说明

### 前提条件

使用本插件前，您需要：

1. 拥有火山引擎账号
2. 开通火山知识库服务
3. 创建知识库并上传文档
4. 获取访问凭证（AK/SK）

### 必要参数

两个工具都需要以下基本参数：

- **API主机地址 (host)**：火山知识库服务的API地址
- **访问密钥 (ak)**：您的火山引擎访问密钥
- **密钥 (sk)**：您的火山引擎密钥
- **查询内容 (query)**：要在知识库中搜索的问题或关键词
- **知识库名称 (collection_name)** 或 **知识库ID (resource_id)**：至少需要提供其中一个

### 可选参数

- **项目 (project)**：火山知识库中的项目名称，默认为"default"
- **重排开关 (rerank_switch)**：是否启用重排序，默认为false
- **检索数量 (retrieve_count)**：要检索的文档数量，默认为25
- **限制数量 (limit)**：返回结果的最大数量，默认为10
- **密集权重 (dense_weight)**：密集检索的权重，默认为0.5
- **文档过滤器 (doc_filter)**：文档检索的过滤条件，需以JSON字符串格式提供

## 使用说明

### 知识库搜索工具

此工具用于检索知识库中的相关文本片段，不生成回答。

```yaml
工具名称：search_knowledge
参数示例：
  host: "api.volcengineapi.com"
  ak: "您的访问密钥"
  sk: "您的密钥"
  query: "什么是火山知识库？"
  collection_name: "我的知识库"
  project: "default"
  limit: 5
```

### 搜索和生成工具

此工具不仅检索知识库，还会使用大语言模型生成回答。

```yaml
工具名称：search_and_generate
参数示例：
  host: "api.volcengineapi.com"
  ak: "您的访问密钥"
  sk: "您的密钥"
  query: "什么是火山知识库？"
  collection_name: "我的知识库"
  project: "default"
  limit: 5
```

## 文档过滤器使用示例

文档过滤器允许您根据元数据筛选文档。以下是一个示例：

```json
{"op": "must", "field": "doc_id", "conds": ["_sys_auto_gen_doc_id-15470294082340384087", "_sys_auto_gen_doc_id-3695736114055028321", "_sys_auto_gen_doc_id-14567900302762393773", "_sys_auto_gen_doc_id-9120950275281633259"]}
```

## 获取访问凭证

1. 登录火山引擎控制台
2. 进入"访问控制" > "API凭证"
3. 创建或查看您的AK/SK

## 注意事项

- 请妥善保管您的访问凭证，不要在公开场合分享
- 确保您的知识库已正确创建并包含相关文档
- 对于复杂查询，建议使用更精确的检索参数

## 错误排查

如果遇到问题，请检查：

1. 凭证是否正确
2. 知识库名称或ID是否存在
3. 文档过滤器JSON格式是否有效
4. 网络连接是否正常

如需更多帮助，请参考火山引擎官方文档或联系技术支持。

